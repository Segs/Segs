libname(ace ACE)
ExternalProject_Add(
   ACE_BUILD
   URL ${CMAKE_CURRENT_SOURCE_DIR}/naked_ace.tgz
   UPDATE_COMMAND ""
   INSTALL_DIR ${ThirdParty_Install_Dir}
   CMAKE_ARGS -DCMAKE_TOOLCHAIN_FILE=${CMAKE_TOOLCHAIN_FILE} -DCMAKE_STAGING_PREFIX:PATH=${ThirdParty_Install_Dir} -DCMAKE_INSTALL_PREFIX:PATH=<INSTALL_DIR>
   CMAKE_GENERATOR "${CMAKE_GENERATOR}"
   CMAKE_GENERATOR_TOOLSET ${CMAKE_GENERATOR_TOOLSET}
   BUILD_BYPRODUCTS
        ${ace_LIBRARY_SHARED} ${ace_LIBRARY_IMP}
)
find_package(Threads)
ADD_LIBRARY(ace_IMP SHARED IMPORTED GLOBAL)
add_dependencies(ace_IMP ACE_BUILD)

SET_PROPERTY(TARGET ace_IMP APPEND PROPERTY IMPORTED_LOCATION ${ace_LIBRARY_SHARED} )
SET_PROPERTY(TARGET ace_IMP APPEND PROPERTY IMPORTED_IMPLIB ${ace_LIBRARY_IMP} )

set_property(TARGET ace_IMP APPEND PROPERTY INTERFACE_COMPILE_DEFINITIONS ACE_HAS_DLL=1)
set_property(TARGET ace_IMP APPEND PROPERTY INTERFACE_LINK_LIBRARIES Threads::Threads)
message(${ace_LIBRARY_SHARED})
install(FILES ${ace_LIBRARY_SHARED} DESTINATION deploy)
